list = %w(850600068	292
850600069	217
850600070	215
850600071	216
850600072	218
850600073	222
850600074	132
850600075	229
850600076	133
850600077	228
850600078	241
850600079	230
850600080	240
850600081	249
850600082	242
850600083	248
850600084	256
850600085	255
850600086	263
850600087	262
850600088	177
850600089	264
850600090	273
850600091	267
850600092	266
850600093	289
850600094	282
850600095	283
850600096	291
850600097	284
850600098	301
850600099	290
850600100	277
850600101	278
850600102	279
850600103	265
850600104	280
850600105	281
850600106	285
850600107	286
850600108	287
850600109	288
850600110	293
850600111	294
850600112	295
850600113	298
850600114	299
850600115	300
850600118	205
850600120	204a
850600121	204b
850600122	219
850600123	220
850600124	224
850600125	206
850600126	207
850600127	221
850600129	223
850600130	234
850600131	225
850600132	226
850600133	227
850600134	108
850600135	231
850600136	232
850600137	233
850600138	235
850600139	238
850600140	239
850600141	243
850600142	244
850600143	245
850600144	246
850600145	247
850600146	236
850600147	237
850600148	250
850600149	251
850600150	252
850600151	253
850600152	254
850600153	307
850600154	257
850600155	53
850600156	271
850600157	258
850600158	259
850600159	260
850600160	261
850600161	313
850600162	314
850600163	315
850600164	308
850600165	268
850600166	269
850600167	270
850600168	275
850600169	272
850600170	321
850600171	296
850600172	297
850600173	316
850600174	178
850600175	199
850600176	200
850600177	274
850600178	276
850600179	309
850600180	302
850600181	317
850600182	318
850600183	304
850600186	303
850600187	310
850600188	305
850600197	311
850600198	319
850600199	306
850600200	312
850600201	320
850600202	322
850600203	324
850600204	325
850600205	328
850600206	329
850600207	326
850600208	327
850600209	331
850600210	323
850600215	342
850600216	350
850600217	333
850600218	334
850600219	352
850600220	353
850600221	340
850600222	354
850600223	347
850600224	339
850600225	348
850600226	341
850600227	356
850600228	355
850600229	357
850600230	349
850600231	330
850600232	335
850600233	343
850600234	345
850600235	346
850600236	351
850600237	360
850600238	361
850600239	362
850600240	363
850600241	364
850600242	369
850600243	358
850600244	336
850600245	344
850600246	337
850600247	338
850600248	332
850600250	385
850600251	398
850600252	399
850600253	397
850600254	405
850600255	400
850600256	401
850600257	406
850600258	409
850600259	407
850600260	384
850600261	359
850600262	370
850600263	383
850600264	382
850600265	402
850600266	403
850600267	404
850600268	381
850600269	396
850600270	408
850600271	391
850600272	390
850600273	377
850600274	386
850600275	371
850600277	378
850600278	379
850600279	380
850600280	394
850600281	395
850600284	387
850600286	388
850600287	389
850600288	392
850600289	393
850696811	410
850704147	365
850704176	414
850712965	415
850713928	366
850713938	367
850715327	376
850716183	416
850720493	417
850720778	375
850720951	374
850721099	372
850721132	373
850728744	368
850776004	125
850776005	138
850776006	137
850776007	134
850776008	135
850776009	136
850776010	181
850776011	182
850776012	183
850776013	184
850776014	113
850776015	46
850776016	120
850776017	119
850776018	185
850776019	186
850776020	44
850776021	127
850776022	130
850776023	187
850776024	48
850776025	56
850776026	126
850776027	69
850776028	87
850776029	128
850776030	131
850776031	55
850776032	104
850776033	109
850776034	110
850776035	49
850776036	154
850776037	155
850776038	156
850776039	157
850776040	158
850776041	159
850776042	161
850776043	160
850776044	162
850776045	163
850776046	164
850776047	165
850776049	166
850776050	168
850776051	167
850776052	169
850776053	170
850776054	171
850776055	172
850776056	173
850776057	174
850776058	175
850776059	129
850776060	176
850776061	179
850776062	180
850776063	124
850776064	99
850776065	98
850776066	411
850776067	412
850776068	413
850776069	418
850776075	419
850776076	420
850776077	421
850776078	54
850776079	123
850776080	50
850776081	112
850776082	105
850776083	140
850776084	430
850776085	431
850776086	432
850776087	433
850776088	434
850776089	435
850776090	101
850776094	114
850776095	100
850776096	436
850776097	529
850776098	530
850776101	96
850776102	41
850776103	208
850776104	209
850776105	210
850776106	531
850776107	437
850776108	438
850776109	439
850776110	440
850776117	422
850776118	423
850776119	424
850776120	532
850776121	533
850776122	425
850776123	426
850776124	427
850776125	428
850776126	429
850776127	441
850776128	442
850776131	196
850776132	188
850776133	211
850776134	212
850776135	201
850776136	197
850776137	534
850776138	535
850776139	536
850776140	537
850776141	538
850776142	539
850776143	540
850776144	541
850776145	542
850776146	443
850776147	444
850776148	445
850776149	446
850776150	447
850776151	448
850776152	189
850776160	449
850776161	543
850776162	544
850776163	545
850776164	546
850776165	547
850776166	548
850776172	190
850776173	202
850776174	213
850776175	214
850776176	191
850776177	192
850776178	193
850776179	549
850776180	450
850776181	451
850776182	454
850776183	455
850776184	456
850776185	457
850776186	458
850776191	148
850776192	149
850776193	150
850776194	151
850776195	152
850776196	550
850776197	551
850776198	552
850776199	553
850776200	554
850776201	555
850776202	459
850776203	460
850776204	461
850776205	462
850776206	463
850776207	464
850776211	153
850776212	194
850776213	195
850776214	198
850776215	203
850776216	465
850776223	466
850776224	467
850776225	468
850776226	469
850776227	470
850776228	139
850776229	43
850776235	471
850776236	472
850776240	121
850776241	118
850776242	122
850776243	47
850776244	57
850776248	115
850776249	116
850776250	106
850776251	107
850776252	111
850776254	486
850776255	487
850776256	488
850776257	489
850776258	490
850776259	491
850776260	492
850776261	493
850776262	494
850776263	495
850776264	496
850776265	497
850776266	498
850776267	499
850776268	500
850776269	501
850776270	502
850776271	503
850776272	504
850776273	505
850776274	506
850776275	507
850776276	508
850776277	509
850776278	510
850776279	511
850776280	512
850776281	513
850776282	514
850776283	515
850776284	517
850776285	516
850776286	518
850776287	519
850776288	520
850776289	521
850776290	522
850776291	523
850776292	524
850776293	525
850776294	526
850776295	527
850776296	528
850776297	473
850776298	474
850776299	475
850776300	476
850776301	477
850776302	478
850776303	479
850776304	481
850776305	482
850776306	483
850776307	480
850776308	484
850776309	485)

@mc = MarcConfigCache.get_configuration("source")

list.each_slice(2) do |pair|
    #puts "id: #{pair[0]}, #{pair[1]}"

    s = Source.find(pair[0])

    if s.marc.all_values_for_tags_with_subtag(["690"], "0").sort.uniq.include?(54)
        puts "Not added to: #{pair[0]}"
        next
    end

    n690 = MarcNode.new("source", "690", "", @mc.get_default_indicator("690"))
   
    n690.add_at(MarcNode.new("source", "0", "54", nil), 0 )
    n690.add_at(MarcNode.new("source", "a", "KirS", nil), 0 )
    n690.add_at(MarcNode.new("source", "n", pair[1], nil), 0 )
    n690.sort_alphabetically
    s.marc.root.add_at(n690, s.marc.get_insert_position("690") )

    s.paper_trail_event = "Add KirS #{pair[1]}"
    s.save
    
    puts "Added 690 to: #{pair[0]}"

end